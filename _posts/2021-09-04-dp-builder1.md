---
layout: post
title: 建造者模式
subtitle: 这种模式最常见于构造某种参数或者变量或者被使用的类
image: /img/lifedoc/jijiji.jpg
tags: [Design Patterns]
---

| 使用场景 | 实现方式 |
|---|---|
| 使用 builder 创建者模式的场景一般为构造一个参数含有大量数据的场景 | 将 builder 模式内置到目标类中，目标类使用 private 修饰构造方法，对外暴露对应的 builder 通过链式调用 builder 的各种方法后，调用 build 生成对应的目标类 |
| **项目中实践** | 使用 apm 打点的时候借助 kotlin 语言的 DSL 特性实现了 builder 模式，在广告 sdk 中也使用该模式创建参数 |

**架构图**

![](https://raw.githubusercontent.com/XPJ1993/images/master/20210902143631.png)


```java
package com.example.xpj.adapters;

import com.example.xpj.DPConstants;

public class DPFoodFactory {
    // 食物生产者，每种类型只能生产自己擅长的食物
    public interface DPFood<T> {
        T produceFood();
    }

    public static class DPIntFood implements DPFood<Integer> {
        @Override
        public Integer produceFood() {
            return 2333;
        }
    }

    public static class DPLongFood implements DPFood<Long> {
        @Override
        public Long produceFood() {
            return 6666L;
        }
    }

    // adapter 的 接口，有两个泛型一个输入一个输出
    public interface DPAdapter<T, R> {
        R adapt(T t);
    }

    public static class DPInt2StringAdapter implements DPAdapter<Integer, String> {
        @Override
        public String adapt(Integer t) {
            return t.toString() + " im from Int. ";
        }
    }

    public static class DPLong2StringAdapter implements DPAdapter<Long, String> {
        @Override
        public String adapt(Long t) {
            return t.toString() + " im From Long. ";
        }
    }

    // 这里用户只能吃 String 的食物
    public static class DPAdapterUser {
        public void feedMe(String food) {
            DPConstants.PRTMsg("yes this food is i like! " + food + " thank you!!");
        }
    }

    public void testAdapter() {
        DPAdapterUser user = new DPAdapterUser();
        // 调用对应的 adapter 去转换为用户能够消化的食物
        user.feedMe(new DPInt2StringAdapter().adapt(new DPIntFood().produceFood()));
        user.feedMe(new DPLong2StringAdapter().adapt(new DPLongFood().produceFood()));
    }
}
```

#### 总结

适配器模式用的最多的是 recyclerview 里面数据与 holder 的转换，自己常用的一种类似于 adapter 的是数据转换，就是在写首页的时候有一个 transform 模块，这个也是将输入转换为我们感兴趣的模块。
